(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0616708e"],{"98ca":function(t,e,s){"use strict";s("dfa1")},ae6b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s(t.layout,{tag:"component"},[s("div",{staticClass:"page-info px-5 position-relative"},[s("h2",{staticClass:"h2 font-weight-bold"},[t._v("Contents")]),s("MenuContent",{attrs:{active:"blog"}}),"normal"===t.profile.role?s("div",{staticClass:"wrap-content-head-btns"},[s("router-link",{staticClass:"btn font-weight-bol btn-gray-outline ml-3",attrs:{to:"/dashboard/content"}},[t._v("Cancel")]),s("button",{staticClass:"btn font-weight-bold btn-primary-outline ml-3",attrs:{disabled:""===t.post.title},on:{click:function(e){return t.saveAsDraft("draft")}}},[t._v(" Save as draft ")]),s("button",{staticClass:"btn font-weight-bold btn-success-outline ml-3",attrs:{disabled:""===t.post.title||""===t.post.category||""===t.post.content},on:{click:function(e){return t.publishArticle("pending")}}},[t._v(" Publish ")])],1):t._e()],1),s("div",{staticClass:"dash-container"},["normal"===t.profile.role?s("div",[s("h4",{staticClass:"h5"},[s("router-link",{staticClass:"btn btn-back",attrs:{to:"/dashboard/content"}},[s("i",{staticClass:"icon-arrow-left"}),s("span",{staticClass:"ml-3"},[t._v(" Back ")])]),s("span",{staticClass:"text-blue-dark font-weight-bold"},[t._v(" "+t._s(t.post.title)+" ")])],1),!t.created&&t.editing?s("div",{staticClass:"alert alert-info"},[t._v(" Wait, we are editing your content... ")]):t._e(),t.created&&!t.uploading?s("div",{staticClass:"alert alert-success"},[t._v(" Your content has been created successfully! ")]):t._e(),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12 col-md-8 col-l-8"},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"}],staticClass:"form-control custom-input",attrs:{type:"text",required:"",placeholder:"Post Title"},domProps:{value:t.post.title},on:{input:function(e){e.target.composing||t.$set(t.post,"title",e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("vue-editor",{attrs:{editorToolbar:t.toobar,editorOptions:t.editorSettings},model:{value:t.post.content,callback:function(e){t.$set(t.post,"content",e)},expression:"post.content"}})],1)]),s("div",{staticClass:"col-sm-12 col-md-4 col-l-4"},[s("div",{staticClass:"content-form-sidebar"},[s("h3",{staticClass:"h6"},[t._v("Category")]),s("div",{staticClass:"h4 mb-4"},[t._v(" "+t._s(t.post.category)+" ")]),s("h3",{staticClass:"h6"},[t._v("Tags")]),s("vue-tags-input",{attrs:{tags:t.tags},on:{"tags-changed":function(e){return t.tags=e}},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),t.showOtherCategoryInput?s("div",{staticClass:"form-group"},[s("h3",{staticClass:"h6 my-3"},[t._v("Specify other category")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.post.category,expression:"post.category"}],staticClass:"form-control custom-input",attrs:{type:"text",placeholder:"Type category..."},domProps:{value:t.post.category},on:{input:function(e){e.target.composing||t.$set(t.post,"category",e.target.value)}}})]):t._e(),s("h3",{staticClass:"h6 my-3"},[t._v("Featured Image")]),s("button",{staticClass:"btn btn-block",on:{click:function(e){return t.$refs.FileInput.click()}}},[t.post.image?s("span",[t._v(" Change image ")]):s("span",[t._v(" Select image ")])]),t.selectedFile?t._e():s("div",{staticClass:"image my-3"},[s("img",{attrs:{src:t.IMAGE_URL+"c_fill,g_center,w_440,h_220/"+t.post.image,alt:t.post.title}})]),s("div",{staticClass:"my-3"},[s("input",{ref:"FileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.onFileSelect}}),s("VueCropper",{directives:[{name:"show",rawName:"v-show",value:t.selectedFile&&!t.imageUpdated,expression:"selectedFile && !imageUpdated"}],ref:"cropper",attrs:{src:t.selectedFile,alt:"Source Image",aspectRatio:t.aspectRatio}})],1)],1)])])]):s("div",{staticClass:"not-allowed"})])])],1)},o=[],i=s("2b0e"),n=s("bc3a"),l=s.n(n),r=s("aa08"),c=s("8f8f"),d=s("95c3"),p=s.n(d),u=(s("6107"),s("c0dd")),g=s("c7a0"),h=s.n(g),m=s("5873"),v={name:"write-blog",components:{MenuContent:c["a"],VueCropper:p.a,VueTagsInput:h.a,VueEditor:m["a"]},data(){return{post:{id:"",title:"",content:"",tags:"",image:"",status:"pending",author:"",category:""},toobar:[["bold","italic","underline"]],editorSettings:{modules:{clipboard:{matchVisual:!1}}},tags:[],tag:"",categories:[],mime_type:"",cropedImage:"",autoCrop:!1,selectedFile:"",aspectRatio:16/9,image:"",dialog:!1,files:"",uploading:!1,created:!1,editing:!1,imageUpdated:!1,showOtherCategoryInput:!1}},created(){const t=this.$route.params.slug;r["a"].get("blog/info/"+t).then(t=>{this.post=t.data.result,this.loaded=!0,JSON.parse(this.post.tags).map(t=>{this.tags.push({text:t})})}).catch(()=>{this.loading=!1,this.loaded=!0})},mounted(){this.categories=u["a"]},methods:{convertTags(t){return console.log(t),!0},changeCategory(t){"other"===t.target.value?(this.showOtherCategoryInput=!0,this.post.category=""):(this.showOtherCategoryInput=!1,this.post.category=t.target.value)},publishArticle(t){this.editing=!0,this.savePost(t)},saveAsDraft(t){this.editing=!0,this.savePost(t)},savePost(t){this.post.status=t,this.uploading=!0,this.created=!1;let e=[];if(this.tags){for(const t of this.tags)e=[...e,t.text];this.post.tags=JSON.stringify(e)}this.selectedFile?(this.uploading=!1,this.uploadImage()):this.submitPostNow()},submitPostNow(){r["a"].patch("blog/edit/"+this.post.id,this.post).then(()=>{this.created=!0,i["default"].$toast.open({message:"Blog has been created successfully",type:"success"})}).catch(()=>{this.uploading=!1,this.created=!1,i["default"].$toast.open({message:"Sorry, something went wrong while updating your social media accounts",type:"error"})}),this.editing=!1},uploadImage(){this.imageUpdated=!1,this.cropedImage=this.$refs.cropper.getCroppedCanvas().toDataURL(),this.$refs.cropper.getCroppedCanvas().toBlob(t=>{const e=new FormData;e.append("file",t),e.append("upload_preset","wjjxv2a4"),e.append("cloud_name","dbvxqoznr");const s={headers:{"X-Requested-With":"XMLHttpRequest"}};l.a.post("https://api.cloudinary.com/v1_1/dbvxqoznr/image/upload",e,s).then(t=>{this.post.image=`v${t.data.version}/${t.data.public_id}.${t.data.format}`,this.selectedFile=!1,this.imageUpdated=!0,this.submitPostNow()}).catch(()=>{this.uploading=!1,this.created=!1})},this.mime_type)},onFileSelect(t){const e=t.target.files[0];if(this.mime_type=e.type,"function"===typeof FileReader){this.dialog=!0;const t=new FileReader;t.onload=t=>{this.selectedFile=t.target.result,this.$refs.cropper.replace(this.selectedFile)},t.readAsDataURL(e)}else alert("Sorry, FileReader API not supported")}},computed:{layout(){return this.$route.meta.layout}}},f=v,b=(s("98ca"),s("2877")),C=Object(b["a"])(f,a,o,!1,null,"c50df312",null);e["default"]=C.exports},dfa1:function(t,e,s){}}]);
//# sourceMappingURL=chunk-0616708e.8cb49585.js.map