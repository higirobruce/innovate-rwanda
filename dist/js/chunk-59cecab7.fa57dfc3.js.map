{"version":3,"sources":["webpack:///./src/pages/dashboard/content/jobs/edit.vue?1a9a","webpack:///./src/pages/dashboard/content/jobs/edit.vue?f951","webpack:///src/pages/dashboard/content/jobs/edit.vue","webpack:///./src/pages/dashboard/content/jobs/edit.vue?96bf","webpack:///./src/pages/dashboard/content/jobs/edit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","layout","tag","staticClass","_v","attrs","profile","role","post","title","on","$event","saveAsDraft","category","content","publishArticle","_e","created","editing","uploading","directives","name","rawName","value","expression","domProps","target","composing","$set","toobar","editorSettings","model","callback","$$v","_s","tags","newTags","$refs","FileInput","click","selectedFile","IMAGE_URL","ref","staticStyle","onFileSelect","imageUpdated","aspectRatio","staticRenderFns","components","MenuContent","VueCropper","VueTagsInput","VueEditor","id","image","status","author","modules","clipboard","matchVisual","categories","mime_type","cropedImage","autoCrop","dialog","files","showOtherCategoryInput","slug","$route","params","AxiosHelper","methods","obj","console","log","e","savePost","getTags","text","JSON","stringify","uploadImage","submitPostNow","cropper","getCroppedCanvas","toDataURL","toBlob","formData","FormData","append","blob","config","headers","file","type","FileReader","reader","onload","event","result","replace","readAsDataURL","alert","computed","meta","component"],"mappings":"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","file":"js/chunk-59cecab7.fa57dfc3.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=style&index=0&id=2edd8856&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c(_vm.layout,{tag:\"component\"},[_c('div',{staticClass:\"page-info px-5 position-relative\"},[_c('h2',{staticClass:\"h2 font-weight-bold\"},[_vm._v(\"Contents\")]),_c('MenuContent',{attrs:{\"active\":\"jobs\"}}),(_vm.profile.role === 'normal')?_c('div',{staticClass:\"wrap-content-head-btns\"},[_c('router-link',{staticClass:\"btn font-weight-bol btn-gray-outline ml-3\",attrs:{\"to\":'/dashboard/content'}},[_vm._v(\"Cancel\")]),_c('button',{staticClass:\"btn font-weight-bold btn-primary-outline ml-3\",attrs:{\"disabled\":_vm.post.title === ''},on:{\"click\":function($event){return _vm.saveAsDraft('draft')}}},[_vm._v(\" Save as draft \")]),_c('button',{staticClass:\"btn font-weight-bold btn-success-outline ml-3\",attrs:{\"disabled\":_vm.post.title === '' || _vm.post.category === '' || _vm.post.content === ''},on:{\"click\":function($event){return _vm.publishArticle('pending')}}},[_vm._v(\" Publish \")])],1):_vm._e()],1),_c('div',{staticClass:\"dash-container\"},[(_vm.profile.role === 'normal')?_c('div',[_c('h4',{staticClass:\"h5\"},[_c('router-link',{staticClass:\"btn btn-back\",attrs:{\"to\":'/dashboard/content'}},[_c('i',{staticClass:\"icon-arrow-left\"}),_c('span',{staticClass:\"ml-3\"},[_vm._v(\" Back \")])]),_c('span',{staticClass:\"text-blue-dark font-weight-bold\"},[_vm._v(\" New post \")])],1),(!_vm.created && _vm.editing)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\" Wait, we are editing your content... \")]):_vm._e(),(_vm.created && !_vm.uploading)?_c('div',{staticClass:\"alert alert-success\"},[_vm._v(\" Your content has been created successfully! \")]):_vm._e(),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-sm-12 col-md-8 col-l-8\"},[_c('div',{staticClass:\"form-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.post.title),expression:\"post.title\"}],staticClass:\"form-control custom-input\",attrs:{\"type\":\"text\",\"required\":\"\",\"placeholder\":\"Post Title\"},domProps:{\"value\":(_vm.post.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.post, \"title\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('vue-editor',{attrs:{\"editorToolbar\":_vm.toobar,\"editorOptions\":_vm.editorSettings},model:{value:(_vm.post.content),callback:function ($$v) {_vm.$set(_vm.post, \"content\", $$v)},expression:\"post.content\"}})],1)]),_c('div',{staticClass:\"col-sm-12 col-md-4 col-l-4\"},[_c('div',{staticClass:\"content-form-sidebar\"},[_c('h3',{staticClass:\"h6\"},[_vm._v(\"Category\")]),_c('div',{staticClass:\"h4 mb-4\"},[_vm._v(\" \"+_vm._s(_vm.post.category)+\" \")]),_c('h3',{staticClass:\"h6\"},[_vm._v(\"Tags\")]),_c('vue-tags-input',{attrs:{\"tags\":_vm.tags},on:{\"tags-changed\":function (newTags) { return (_vm.tags = newTags); }},model:{value:(_vm.tag),callback:function ($$v) {_vm.tag=$$v},expression:\"tag\"}}),(_vm.showOtherCategoryInput)?_c('div',{staticClass:\"form-group\"},[_c('h3',{staticClass:\"h6 my-3\"},[_vm._v(\"Specify other category\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.post.category),expression:\"post.category\"}],staticClass:\"form-control custom-input\",attrs:{\"type\":\"text\",\"placeholder\":\"Type category...\"},domProps:{\"value\":(_vm.post.category)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.post, \"category\", $event.target.value)}}})]):_vm._e(),_c('h3',{staticClass:\"h6 my-3\"},[_vm._v(\"Featured Image\")]),_c('button',{staticClass:\"btn btn-block\",on:{\"click\":function($event){return _vm.$refs.FileInput.click()}}},[(_vm.post.image)?_c('span',[_vm._v(\" Change image \")]):_c('span',[_vm._v(\" Select image \")])]),(!_vm.selectedFile)?_c('div',{staticClass:\"image my-3\"},[_c('img',{attrs:{\"src\":(_vm.IMAGE_URL + \"c_fill,g_center,w_440,h_220/\" + (_vm.post.image)),\"alt\":_vm.post.title}})]):_vm._e(),_c('div',{staticClass:\"my-3\"},[_c('input',{ref:\"FileInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"change\":_vm.onFileSelect}}),_c('VueCropper',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectedFile && !_vm.imageUpdated),expression:\"selectedFile && !imageUpdated\"}],ref:\"cropper\",attrs:{\"src\":_vm.selectedFile,\"alt\":\"Source Image\",\"aspectRatio\":_vm.aspectRatio}})],1)],1)])])]):_c('div',{staticClass:\"not-allowed\"})])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <component :is=\"layout\">\n      <div class=\"page-info px-5 position-relative\">\n        <h2 class=\"h2 font-weight-bold\">Contents</h2>\n        <MenuContent active=\"jobs\"/>\n        <div class=\"wrap-content-head-btns\" v-if=\"profile.role === 'normal'\">\n          <router-link\n            :to=\"'/dashboard/content'\"\n            class=\"btn font-weight-bol btn-gray-outline ml-3\"\n            >Cancel</router-link\n          >\n          <button\n            @click=\"saveAsDraft('draft')\"\n            :disabled=\"post.title === ''\"\n            class=\"btn font-weight-bold btn-primary-outline ml-3\"\n          >\n            Save as draft\n          </button>\n          <button\n            @click=\"publishArticle('pending')\"\n            :disabled=\"\n              post.title === '' || post.category === '' || post.content === ''\n            \"\n            class=\"btn font-weight-bold btn-success-outline ml-3\"\n          >\n            Publish\n          </button>\n        </div>\n      </div>\n      <div class=\"dash-container\">\n        <div v-if=\"profile.role === 'normal'\">\n          <h4 class=\"h5\">\n            <router-link :to=\"'/dashboard/content'\" class=\"btn btn-back\">\n              <i class=\"icon-arrow-left\" />\n              <span class=\"ml-3\"> Back </span>\n            </router-link>\n            <span class=\"text-blue-dark font-weight-bold\"> New post </span>\n          </h4>\n          <div class=\"alert alert-info\" v-if=\"!created && editing\">\n            Wait, we are editing your content...\n          </div>\n          <div class=\"alert alert-success\" v-if=\"created && !uploading\">\n            Your content has been created successfully!\n          </div>\n          <!-- FORM: CREATE BLOG -->\n          <div class=\"row\">\n            <div class=\"col-sm-12 col-md-8 col-l-8\">\n              <div class=\"form-group\">\n                <input\n                  type=\"text\"\n                  v-model=\"post.title\"\n                  required\n                  class=\"form-control custom-input\"\n                  placeholder=\"Post Title\"\n                />\n              </div>\n              <div class=\"form-group\">\n                <vue-editor\n                  :editorToolbar=\"toobar\"\n                  v-model=\"post.content\"\n                  :editorOptions=\"editorSettings\"\n                ></vue-editor>\n              </div>\n            </div>\n            <div class=\"col-sm-12 col-md-4 col-l-4\">\n              <div class=\"content-form-sidebar\">\n                <h3 class=\"h6\">Category</h3>\n                <div class=\"h4 mb-4\">\n                  {{ post.category }}\n                </div>\n                <h3 class=\"h6\">Tags</h3>\n                <vue-tags-input\n                  v-model=\"tag\"\n                  :tags=\"tags\"\n                  @tags-changed=\"(newTags) => (tags = newTags)\"\n                />\n                <div class=\"form-group\" v-if=\"showOtherCategoryInput\">\n                  <h3 class=\"h6 my-3\">Specify other category</h3>\n                  <input\n                    class=\"form-control custom-input\"\n                    v-model=\"post.category\"\n                    type=\"text\"\n                    placeholder=\"Type category...\"\n                  />\n                </div>\n                <h3 class=\"h6 my-3\">Featured Image</h3>\n                <button class=\"btn btn-block\" @click=\"$refs.FileInput.click()\">\n                  <span v-if=\"post.image\"> Change image </span>\n                  <span v-else> Select image </span>\n                </button>\n                <div class=\"image my-3\" v-if=\"!selectedFile\">\n                  <img\n                    :src=\"`${IMAGE_URL}c_fill,g_center,w_440,h_220/${post.image}`\"\n                    :alt=\"post.title\"\n                  />\n                </div>\n                <div class=\"my-3\">\n                  <input\n                    ref=\"FileInput\"\n                    type=\"file\"\n                    style=\"display: none\"\n                    @change=\"onFileSelect\"\n                  />\n                  <VueCropper\n                    v-show=\"selectedFile && !imageUpdated\"\n                    ref=\"cropper\"\n                    :src=\"selectedFile\"\n                    alt=\"Source Image\"\n                    :aspectRatio=\"aspectRatio\"\n                  ></VueCropper>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div v-else class=\"not-allowed\"></div>\n      </div>\n    </component>\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport axios from \"axios\";\nimport AxiosHelper from \"@/helpers/AxiosHelper\";\nimport MenuContent from \"@/components/MenuContent\";\nimport VueCropper from \"vue-cropperjs\";\nimport \"cropperjs/dist/cropper.css\";\nimport categories from \"@/data/blogCategories.js\";\nimport VueTagsInput from \"@johmun/vue-tags-input\";\nimport { VueEditor } from \"vue2-editor\";\n\nexport default {\n  name: \"write-blog\",\n  components: {\n    MenuContent,\n    VueCropper,\n    VueTagsInput,\n    VueEditor,\n  },\n  data() {\n    return {\n      post: {\n        id: \"\",\n        title: \"\",\n        content: \"\",\n        tags: \"\",\n        image: \"\",\n        status: \"pending\",\n        author: \"\",\n        category: \"\",\n      },\n      toobar: [[\"bold\", \"italic\", \"underline\"]],\n      editorSettings: {\n        modules: {\n          clipboard: {\n            matchVisual: false,\n          },\n        },\n      },\n      tags: [],\n      tag: \"\",\n      categories: [],\n      mime_type: \"\",\n      cropedImage: \"\",\n      autoCrop: false,\n      selectedFile: \"\",\n      aspectRatio: 16 / 9,\n      image: \"\",\n      dialog: false,\n      files: \"\",\n      uploading: false,\n      created: false,\n      editing: false,\n      imageUpdated: false,\n      showOtherCategoryInput: false,\n    };\n  },\n  created() {\n    const slug = this.$route.params.slug;\n    AxiosHelper.get(`blog/info/${slug}`)\n      .then((response) => {\n        this.post = response.data.result;\n        this.loaded = true;\n        JSON.parse(this.post.tags).map((value) => {\n          this.tags.push({ text: value });\n        });\n      })\n      .catch(() => {\n        this.loading = false;\n        this.loaded = true;\n      });\n  },\n  mounted() {\n    this.categories = categories;\n  },\n  methods: {\n    convertTags(obj) {\n      console.log(obj);\n      return true;\n    },\n    changeCategory(e) {\n      if (e.target.value === \"other\") {\n        this.showOtherCategoryInput = true;\n        this.post.category = \"\";\n      } else {\n        this.showOtherCategoryInput = false;\n        this.post.category = e.target.value;\n      }\n    },\n    publishArticle(status) {\n      this.editing = true;\n      this.savePost(status);\n    },\n    saveAsDraft(status) {\n      this.editing = true;\n      this.savePost(status);\n    },\n    savePost(status) {\n      this.post.status = status;\n      this.uploading = true;\n      this.created = false;\n      // convert tags\n      let getTags = [];\n      if (this.tags) {\n        for (const value of this.tags) {\n          getTags = [...getTags, value.text];\n        }\n        this.post.tags = JSON.stringify(getTags);\n      }\n      if (this.selectedFile) {\n        this.uploading = false;\n        this.uploadImage();\n      } else {\n        this.submitPostNow();\n      }\n    },\n    submitPostNow() {\n      AxiosHelper.patch(`blog/edit/${this.post.id}`, this.post)\n        .then(() => {\n          this.created = true;\n          Vue.$toast.open({\n            message: \"Blog has been created successfully\",\n            type: \"success\",\n          });\n        })\n        .catch(() => {\n          this.uploading = false;\n          this.created = false;\n          Vue.$toast.open({\n            message:\n              \"Sorry, something went wrong while updating your social media accounts\",\n            type: \"error\",\n          });\n        });\n      this.editing = false;\n    },\n    uploadImage() {\n      this.imageUpdated = false;\n      this.cropedImage = this.$refs.cropper.getCroppedCanvas().toDataURL();\n      this.$refs.cropper.getCroppedCanvas().toBlob((blob) => {\n        const formData = new FormData();\n        formData.append(\"file\", blob);\n        formData.append(\"upload_preset\", \"wjjxv2a4\");\n        formData.append(\"cloud_name\", \"dbvxqoznr\");\n        const config = {\n          headers: { \"X-Requested-With\": \"XMLHttpRequest\" },\n        };\n        axios\n          .post(\n            \"https://api.cloudinary.com/v1_1/dbvxqoznr/image/upload\",\n            formData,\n            config\n          )\n          .then((response) => {\n            // uploaded successfully, continue submiting article then\n            this.post.image = `v${response.data.version}/${response.data.public_id}.${response.data.format}`;\n            this.selectedFile = false;\n            this.imageUpdated = true;\n            this.submitPostNow();\n          })\n          .catch(() => {\n            this.uploading = false;\n            this.created = false;\n          });\n      }, this.mime_type);\n    },\n    onFileSelect(e) {\n      const file = e.target.files[0];\n      this.mime_type = file.type;\n      if (typeof FileReader === \"function\") {\n        this.dialog = true;\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          this.selectedFile = event.target.result;\n          this.$refs.cropper.replace(this.selectedFile);\n        };\n        reader.readAsDataURL(file);\n      } else {\n        alert(\"Sorry, FileReader API not supported\");\n      }\n    },\n  },\n  computed: {\n    layout() {\n      return this.$route.meta.layout;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.content-form-sidebar {\n  background: #f0f2f8;\n  padding: 25px;\n  border-radius: 3px;\n}\n.content-form-sidebar button {\n  border: 1px solid #5e7c8d;\n  background: #f0f2f8;\n  border-radius: 3px;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit.vue?vue&type=template&id=2edd8856&scoped=true&\"\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./edit.vue?vue&type=style&index=0&id=2edd8856&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2edd8856\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}